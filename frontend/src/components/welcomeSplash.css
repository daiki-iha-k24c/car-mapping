.ws-root {
  position: fixed;
  inset: 0;
  background: #fff;
  display: grid;
  place-items: center;
  overflow: hidden;
  z-index: 10000;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Sans", "Helvetica Neue", Arial;
}

/* テキスト */
.ws-line {
  position: absolute;
  top: 45vh;
  transform: translateY(-50%);
  font-weight: 900;
  letter-spacing: 0.6px;
  font-size: 34px;
  white-space: nowrap;
}

.ws-typeLine { 
    color: rgba(0,0,0,0.88);
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}
.ws-typeText {
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  width: 0ch;
  animation: typing 1100ms steps(11, end) forwards;
}
.ws-caret {
  display: inline-block;
  width: 2px;
  height: 34px;
  margin-left: 6px;
  background: rgba(0,0,0,0.55);
  transform: translateY(4px);
  animation: caretBlink 700ms step-end infinite;
}

.ws-root.ws-swap .ws-typeLine,
.ws-root.ws-ballize .ws-typeLine,
.ws-root.ws-drop .ws-typeLine,
.ws-root.ws-puff .ws-typeLine,
.ws-root.ws-out .ws-typeLine {
  opacity: 0;
  transition: opacity 180ms ease;
}

.ws-finalLine {
  opacity: 0;
  color: rgba(0,0,0,0.90);
}
.ws-root.ws-swap .ws-finalLine,
.ws-root.ws-ballize .ws-finalLine,
.ws-root.ws-drop .ws-finalLine,
.ws-root.ws-puff .ws-finalLine,
.ws-root.ws-out .ws-finalLine {
  opacity: 1;
  transition: opacity 220ms ease;
}

/* a */
.ws-a {
  display: inline-block;
  position: relative;
}

/* ballize以降は a文字を消す（ボールに置き換える） */
.ws-root.ws-ballize .ws-a,
.ws-root.ws-drop .ws-a,
.ws-root.ws-puff .ws-a,
.ws-root.ws-out .ws-a {
  opacity: 0;
  transition: opacity 120ms ease;
}

/* ===== a → 青ボール ===== */
.ws-ball {
  position: fixed;
  width: 30px;
  height: 30px;
  border-radius: 999px;
  background: #039be5;
  box-shadow: 0 14px 34px rgba(0,0,0,0.16);
  transform: translate(-50%, -50%) ;
  opacity: 0;
  pointer-events: none;
}

/* ボール化：じわっと出る */
.ws-root.ws-ballize .ws-ball {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
  transition: transform 350ms cubic-bezier(0.2, 0.9, 0.2, 1), opacity 120ms ease;
}

/* 落下：画面最下部まで（80vh→100vh） */
.ws-root.ws-drop .ws-ball {
  opacity: 1;
  animation: ballDrop 550ms cubic-bezier(0.22, 0.61, 0.2, 1) forwards;
}

/* puff中はその位置のまま */
.ws-root.ws-puff .ws-ball,
.ws-root.ws-out .ws-ball {
  opacity: 1;
}

/* ===== Practical puff（起点は ball の位置にJSで置く） ===== */
/* 広がり用：全画面をclip-pathで円拡大 */
.ws-flood{
  position: fixed;
  inset: 0;
  background: #039be5;
  opacity: 0;
  pointer-events: none;

  /* 起点（JSでセット） */
  --fx: 50vw;
  --fy: 50vh;

  clip-path: circle(0px at var(--fx) var(--fy));
}

/* puffフェーズで1秒かけて確実に全画面塗る */
.ws-root.ws-puff .ws-flood,
.ws-root.ws-out .ws-flood{
  opacity: 1;
  clip-path: circle(160vmax at var(--fx) var(--fy));
  transition:
    clip-path 1000ms cubic-bezier(0.55, 0.055, 0.675, 0.19),
    opacity 140ms ease;
}
/* puff中は文字を白っぽく（見せたくなければ opacity:0 でもOK） */
.ws-root.ws-puff .ws-finalLine,
.ws-root.ws-out .ws-finalLine {
  color: rgba(255,255,255,0.92);
  transition: color 200ms ease;
}

/* out */
.ws-root.ws-out {
  animation: fadeOut 420ms ease forwards;
}

/* ===== keyframes ===== */
@keyframes typing {
  from { width: 0ch; }
  to   { width: 11ch; }
}
@keyframes caretBlink {
  0%,100% { opacity: 0; }
  50% { opacity: 1; }
}

/* ✅ 最下部まで落とす：topの現在値→calc(100vh - 安全マージン) */
@keyframes ballDrop {
  to {
    top: calc(100vh - 22px); /* 画面最下部ギリギリ（ボール半径ぶん余白） */
  }
}

@keyframes fadeOut {
  to { opacity: 0; }
}

@media (prefers-reduced-motion: reduce) {
  .ws-typeText { animation: none; width: 11ch; }
  .ws-caret { opacity: 0; animation: none; }
  .ws-root.ws-drop .ws-ball { animation: none; top: calc(100vh - 22px); }
  .ws-root.ws-puff .ws-splash { animation: none; opacity: 1; }
  .ws-root.ws-out { animation: none; opacity: 0; }
}


.ws-flood{
  will-change: clip-path;
  transform: translateZ(0);
}
