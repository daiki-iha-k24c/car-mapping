.ws-root {
  position: fixed;
  inset: 0;
  background: #fff;
  display: grid;
  place-items: center;
  overflow: hidden;
  z-index: 10000;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "Hiragino Sans", "Helvetica Neue", Arial;

  /* flood起点（JSで更新） */
  --fx: 50vw;
  --fy: 50vh;
}

/* ===== テキスト ===== */
.ws-line {
  position: absolute;
  top: 45vh;
  transform: translateY(-50%);
  font-weight: 900;
  letter-spacing: 0.6px;
  font-size: 34px;
  white-space: nowrap;
}

.ws-typeLine { color: rgba(0,0,0,0.88); }
.ws-typeText {
  display: inline-block;
  overflow: hidden;
  white-space: nowrap;
  width: 0ch;
  animation: typing 2200ms steps(11, end) forwards;
}
.ws-caret {
  display: inline-block;
  width: 2px;
  height: 34px;
  margin-left: 6px;
  background: rgba(0,0,0,0.55);
  transform: translateY(4px);
  animation: caretBlink 700ms step-end infinite;
}

/* type行を消す */
.ws-root.ws-swap .ws-typeLine,
.ws-root.ws-ballize .ws-typeLine,
.ws-root.ws-drop .ws-typeLine,
.ws-root.ws-flood .ws-typeLine,
.ws-root.ws-out .ws-typeLine {
  opacity: 0;
  transition: opacity 180ms ease;
}

/* 完成形 */
.ws-finalLine {
  opacity: 0;
  color: rgba(0,0,0,0.90);
}
.ws-root.ws-swap .ws-finalLine,
.ws-root.ws-ballize .ws-finalLine,
.ws-root.ws-drop .ws-finalLine,
.ws-root.ws-flood .ws-finalLine,
.ws-root.ws-out .ws-finalLine {
  opacity: 1;
  transition: opacity 220ms ease;
}

.ws-a { display: inline-block; }

/* ballize以降は a文字を消す */
.ws-root.ws-ballize .ws-a,
.ws-root.ws-drop .ws-a,
.ws-root.ws-flood .ws-a,
.ws-root.ws-out .ws-a {
  opacity: 0;
  transition: opacity 120ms ease;
}

/* ===== 青ボール ===== */
.ws-ball {
  position: fixed;
  width: 36px;
  height: 36px;
  border-radius: 999px;
  background: #039be5;
  box-shadow: 0 14px 34px rgba(0,0,0,0.16);
  transform: translate(-50%, -50%);
  opacity: 0;
  pointer-events: none;
}

/* a→ボール化（フェードイン） */
.ws-root.ws-ballize .ws-ball,
.ws-root.ws-drop .ws-ball,
.ws-root.ws-flood .ws-ball,
.ws-root.ws-out .ws-ball {
  opacity: 1;
  transition: opacity 180ms ease;
}

/* ✅ 落下して最下部で止まる（戻らない） */
.ws-root.ws-drop .ws-ball {
  animation: ballDrop 1400ms cubic-bezier(0.22, 0.61, 0.2, 1) forwards;
}

/* ===== 着地点から広がる青（安定版） ===== */
.ws-flood{
  position: fixed;
  inset: 0;
  background: #039be5;
  opacity: 0;
  pointer-events: none;
  clip-path: circle(0px at var(--fx) var(--fy));
  will-change: clip-path;
  transform: translateZ(0);
}

/* 1秒で全画面へ */
.ws-root.ws-flood .ws-flood,
.ws-root.ws-out .ws-flood{
  opacity: 1;
  clip-path: circle(160vmax at var(--fx) var(--fy));
  transition:
    clip-path 1000ms cubic-bezier(0.55, 0.055, 0.675, 0.19),
    opacity 120ms ease;
}

/* flood中は文字を白にして馴染ませる */
.ws-root.ws-flood .ws-finalLine,
.ws-root.ws-out .ws-finalLine{
  color: rgba(255,255,255,0.92);
  transition: color 180ms ease;
}

/* out */
.ws-root.ws-out {
  animation: fadeOut 420ms ease forwards;
}

/* ===== keyframes ===== */
@keyframes typing { from{ width:0ch; } to{ width:11ch; } }
@keyframes caretBlink { 0%,100%{opacity:0;} 50%{opacity:1;} }

/* 最下部まで */
@keyframes ballDrop {
  to { top: calc(100vh - 22px); }
}

@keyframes fadeOut { to{ opacity:0; } }

@media (prefers-reduced-motion: reduce) {
  .ws-typeText { animation: none; width: 11ch; }
  .ws-caret { opacity: 0; animation: none; }
  .ws-root.ws-drop .ws-ball { animation: none; top: calc(100vh - 22px); }
  .ws-root.ws-flood .ws-flood {
    opacity: 1;
    clip-path: circle(160vmax at var(--fx) var(--fy));
    transition: none;
  }
  .ws-root.ws-out { animation: none; opacity: 0; }
}
